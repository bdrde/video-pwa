<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Videosprechstunde</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="images/icon-152.png">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0, shrink-to-fit=no">
    <!--meta name="theme-color" content="#bfebfb" /-->
    <meta name="theme-color" content="#dadada" />

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Videosprechstunde">
    <meta name="msapplication-TileImage" content="images/icon-152.png">
    <meta name="msapplication-TileColor" content="#FFFFFF">

    <link rel="canonical" href="https://bdrde.github.io/video-pwa/">
    <link rel="manifest" href="/video-pwa/manifest.json">
</head>

<body>
    <div id="login-overlay">
        <div class="logo">
            <img id="top" src="./images/cloud-icon-128.png" style="width: 80pt;" />
            <div id="title">
                <!--img class="logo-corner-image" src="./images/dtr-logo-corner-red.png" /-->
                <img class="logo-corner" src="./images/dtr-logo-corner.svg" />
                <h1 id="text">Videosprechstunde</h1>
                <img class="logo-dot" src="./images/dtr-logo-dot.svg" />
            </div>
            <img id="icon" src="./images/h-icon.svg" style="width: 50pt;" />
            <img id="sep" src="./images/lines.svg" style="width: 110pt;" />
        </div>

        <div id="logins" class="responsive">
            <div id="login-1" class="responsive-left">
                <div id="inner">
                    <h3>Ich bin Patient</h3>
                    <p>Melden Sie sich mit Ihrer digitalen Versichertenidentität an</p>
                    <a class="button"
                        href="https://authr.herokuapp.com/authenticate?scope=health.hba.auth&redirect_uri=https://bdrde.github.io/video-pwa/">
                        <div class="button-logo"></div>
                        <div class="button-text">Login mit Gesundheitskarte</div>
                    </a>
                </div>
            </div>
            <div id="login-2" class="responsive-right">
                <div id="inner">
                    <h3>Ich bin Arzt</h3>
                    <p>Melden Sie sich mit Ihrer digitalen Arztidentität an</p>
                    <a class="button"
                        href="bdrwlt://authenticate?scope=health.hba.auth&redirect_uri=https://bdrde.github.io/video-pwa/"
                        onclick="showWaitingScreen();">
                        <div class="button-logo"></div>
                        <div class="button-text">Login mit Heilberufsausweis</div>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div id="login-waiting-overlay">
        <div class="logo">
            <img id="top" class="bounce" src="./images/cloud-icon-128.png" style="width: 50pt;" />
            <div id="title">
                <img class="logo-corner" src="./images/dtr-logo-corner.svg" />
                <h1 id="text">Videosprechstunde</h1>
                <img class="logo-dot" src="./images/dtr-logo-dot.svg" />
            </div>
            <img id="icon" src="./images/h-icon.svg" style="width: 50pt;" />
            <img id="sep" src="./images/lines.svg" style="width: 110pt;" />
        </div>
        <h2>Sie werden zur Freigabe in die Wallet geleitet</h2>
        <span onclick="hideWaitingScreen();">Abbrechen</span>
    </div>

    <div id="container">
        <header>
            <div id="left-header">
                <button onclick="logout()" class="nav-button-signout" style="margin: auto;">
                    <img src="./images/flat_cross_icon.svg" style="width: 20px;" />
                </button>
            </div>
            <div id="center-header"></div>
            <div id="right-header">
                <img src="./images/settings-gear.svg" style="height: 40%; margin: auto;" />
            </div>
        </header>

        <main>
        </main>

        <nav>
            <ul>
                <li style="text-align: left;">
                    <a href="/video-pwa/info">
                        <svg class="nav-icon" id="IconInfo" viewBox="0 0 24 24">
                            <path fill="#007AFF"
                                d="M24,12A12,12,0,1,1,12,0,12.013,12.013,0,0,1,24,12ZM14,12a2,2,0,0,0-2-2H10v2h2v7h2ZM12,5a1.5,1.5,0,1,0,1.5,1.5A1.5,1.5,0,0,0,12,5Z" />
                        </svg>
                    </a>
                </li>
                <li style="text-align: center;">
                    <a href="/video-pwa/video">
                        <svg class="nav-icon" id="IconCamera" viewBox="0 0 24 24">
                            <path fill="#007AFF"
                                d="M17.721,3,16.308,1.168A3.023,3.023,0,0,0,13.932,0H10.068A3.023,3.023,0,0,0,7.692,1.168L6.279,3Z" />
                            <circle fill="#007AFF" cx="12" cy="14" r="4" />
                            <path fill="#007AFF"
                                d="M19,5H5a5.006,5.006,0,0,0-5,5v9a5.006,5.006,0,0,0,5,5H19a5.006,5.006,0,0,0,5-5V10A5.006,5.006,0,0,0,19,5ZM12,20a6,6,0,1,1,6-6A6.006,6.006,0,0,1,12,20Z" />
                        </svg>
                    </a>
                </li>
                <li style="text-align: right;">
                    <a href="/video-pwa/prescription">
                        <svg class="nav-icon" id="IconDocumentSigned" viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg" data-name="Layer 1">
                            <path fill="#007AFF"
                                d="m16 .3a4.968 4.968 0 0 1 1.879 1.164l1.656 1.658a4.954 4.954 0 0 1 1.165 1.878h-4.7zm5 6.7v12a5.006 5.006 0 0 1 -5 5h-8a5.006 5.006 0 0 1 -5-5v-14a5.006 5.006 0 0 1 5-5h6v5a2 2 0 0 0 2 2zm-4.192 10.413a1 1 0 0 0 -1.4-.222 4.586 4.586 0 0 1 -2.273.809 1.347 1.347 0 0 1 -.864-.345 3.025 3.025 0 0 0 -1.832-.655 5.861 5.861 0 0 0 -3.046 1.206 1 1 0 1 0 1.214 1.588 3.951 3.951 0 0 1 1.832-.794c.246 0 .371.078.7.3a3.252 3.252 0 0 0 2 .7 6.464 6.464 0 0 0 3.456-1.193 1 1 0 0 0 .213-1.394zm.192-3.413a1 1 0 0 0 -1-1h-8a1 1 0 0 0 0 2h8a1 1 0 0 0 1-1zm0-4a1 1 0 0 0 -1-1h-8a1 1 0 0 0 0 2h8a1 1 0 0 0 1-1z" />
                        </svg>
                    </a>
                </li>
            </ul>
        </nav>

    </div>


    <script>
        if (navigator.serviceWorker) {
            navigator.serviceWorker.register(
                '/video-pwa/sw.js',
                { scope: '/video-pwa/' }
            )
        }

        function logout() {
            window.localStorage.clear();
            window.location.href = 'https://bdrde.github.io/video-pwa/';
        }

        function showWaitingScreen() {
            document.querySelectorAll("#login-waiting-overlay").forEach((tag) => {
                tag.style.display = 'flex';
                //tag.style.display = 'none'
            })
        }

        function hideWaitingScreen() {
            document.querySelectorAll("#login-waiting-overlay").forEach((tag) => {
                tag.style.display = 'none'
            })
        }

        function showLoginQrCode() {
            alert("Hier erscheint ein QR-Code, der mittels der Wallet gescannt werden kann. Die Funktion ist momentan nicht aktiviert.");
            return;
            document.querySelectorAll("#qr-code-login-overlay").forEach((tag) => {
                tag.style.display = 'block';
                //tag.style.display = 'none'
            })
        }

        function hideLoginQrCode() {
            // alert("Hier erscheint ein QR-Code, der mittels der Wallet gescannt werden kann");
            document.querySelectorAll("#qr-code-login-overlay").forEach((tag) => {
                tag.style.display = 'none'
            })
        }
    </script>
    <script type="module" src="js/main.js"></script>
</body>

</html>